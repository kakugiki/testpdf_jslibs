<!doctype html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title></title>
</head>

<body>
    <h1 id="bluetemplate">jsPDF sample</h1>
    <div style="display: none" id="div">
        <img src="img/IMG_3705.jpg" width="300px;"></img>
        <!-- <svg height="100" width="100">
            <circle cx="50" cy="50" r="40" stroke="black" stroke-width="3" fill="red" />
            Sorry, your browser does not support inline SVG.
        </svg> -->
        <!-- <div>
        <select size="4">
            <option>Not Started</option>
            <option selected>In Progess</option>
            <option>Completed</option>
        </select>
    </div> -->

    </div>
    <table id="tbl" class="table table-striped table-bordered" onload="LoadPilotLogBook()">
        <thead>
            <tr>
                <th>
                    <center>DATE</center>
                </th>
                <th colspan="2">DEPARTURE</th>
                <th colspan="2">ARRIVAL</th>
                <th colspan="2">AIRCRAFT</th>
                <th colspan="2">SINGLE PILOT FLIGHT TIME</th>
                <th>MULTI-PILOT</th>
                <th>TOTAL TIME</th>
                <th>NAME OF</th>
                <th colspan="2">LANDINGS</th>
                <th>APPROACH</th>
                <th colspan="2">OPERATIONAL CONDITION TIME</th>
                <th colspan="4">PILOT FUNCTION TIME</th>
                <th colspan="3">FLIGHT SIM TRAINING</th>
                <th>REMARKS AND</th>
                <th colspan="2">ACTIONS</th>
            </tr>
            <tr>
                <th>
                    <center>dd/mm/yyyy</center>
                </th>
                <th>Place</th>
                <th>Time</th>
                <th>Place</th>
                <th>Time</th>
                <th>Model</th>
                <th>Registration</th>
                <th>SE</th>
                <th>ME</th>
                <th>FLIGHT TIME</th>
                <th>OF FLIGHT</th>
                <th>Pilot in command</th>
                <th>Day</th>
                <th>Night</th>
                <th>IFR</th>
                <th>Night</th>
                <th>IFR</th>
                <th>PIC</th>
                <th>Co-Pilot</th>
                <th>Dual</th>
                <th>Instructor</th>
                <th>Date</th>
                <th>Type</th>
                <th>Time</th>
                <th>ENDORSMENTS</th>
                <th>EDIT</th>
                <th>SUPPR</th>
            </tr>
        </thead>
        <tbody>
            <!-- AutoGenerated via JS  -->
        </tbody>
    </table>

    <button class="btn btn-warning" onclick="download()">Click me</button>

    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
        crossorigin="anonymous"> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.debug.js" 
        integrity="sha384-NaWTHo/8YCBYJ59830LTz/P4aQZK1sS0SneOgAvhsIl3zBu8r9RevNg5lHCHAuQ/"
        crossorigin="anonymous"></script> -->
    <script src="/js/jspdf.debug.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <!-- html2canvas 1.0.0-alpha.11 or higher version is needed -->
    <script>
        'use strict';

        function download() {
            zoomOut();
            
            let pdf = new jsPDF('l', 'pt', [1920, 240]);
            pdf.setProperties({
                title: 'jsPDF sample'
            });
            pdf.html(document.getElementById('tbl'), {
                // x: 10,
                // y: 10,
                html2canvas: {
                    scale: 1,
                    // logging: false,
                },
                callback: function () {
                    // fetch(url)
                    //     .then(res => res.blob())
                    //     .then(blob => window.open(URL.createObjectURL(blob)));
                    // pdf.save('test.pdf');
                    window.open(pdf.output('bloburl'));
                    // location.reload();
                }
            });
        }

        function zoomOut() {
            var scale = (window.innerWidth / window.outerWidth);
            if (scale != 1) {
                document.body.style.zoom = scale;
            }            
        }

        function simulateKeydown(keycode, isCtrl, isAlt, isShift) {
            var e = new KeyboardEvent("keydown", {
                bubbles: true,
                cancelable: true,
                char: String.fromCharCode(keycode),
                key: String.fromCharCode(keycode),
                shiftKey: isShift,
                ctrlKey: isCtrl,
                altKey: isAlt
            });
            Object.defineProperty(e, 'keyCode', {
                get: function () {
                    return this.keyCodeVal;
                }
            });
            e.keyCodeVal = keycode;
            document.dispatchEvent(e);
        }

        // https://css-tricks.com/best-way-programmatically-zoom-web-application/
    </script>

    <style>
        select {
            overflow: auto;
        }
    </style>
</body>

</html>